<!DOCTYPE html>
<html>
  <head>
    <title>LED Controller</title>
  </head>
  <body>

    <h1>LED Controller</h1>
    <label for="red">Red:</label>
    <input type="range" id="red" name="red" min="0" max="255"><br>

    <label for="green">Green:</label>
    <input type="range" id="green" name="green" min="0" max="255"><br>

    <label for="blue">Blue:</label>
    <input type="range" id="blue" name="blue" min="0" max="255"><br>

    <div id="status">Status: Not connected</div>

    <script>
      // Replace with your ESP's IP
      const webSocket = new WebSocket('ws://172.20.10.10:81');
      const statusDiv = document.getElementById('status');

      webSocket.addEventListener('open', function (event) {
        statusDiv.textContent = "Status: Connected";
      });

      webSocket.addEventListener('close', function (event) {
        statusDiv.textContent = "Status: Disconnected";
      });

      const redSlider = document.getElementById('red');
      const greenSlider = document.getElementById('green');
      const blueSlider = document.getElementById('blue');

      redSlider.addEventListener('input', sendData);
      greenSlider.addEventListener('input', sendData);
      blueSlider.addEventListener('input', sendData);

      function sendData() {
        const red = redSlider.value;
        const green = greenSlider.value;
        const blue = blueSlider.value;

        const payload = JSON.stringify({
          ledR: red,
          ledG: green,
          ledB: blue
        });

        webSocket.send(payload);
      }
    </script>

  </body>
</html>
